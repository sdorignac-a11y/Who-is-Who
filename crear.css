:root{
  --panel:#0f2b4b;--panel-2:#0c213a;--yellow:#f6c11b;--yellow-2:#f39c12;--text:#eaf2ff;--muted:#a7c0e8;
  --space:16px;
  --glow:#7cf062; --shine:rgba(255,255,255,.18);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:"Outfit",system-ui;
  color:var(--text);
  background:url("fondo-cancha.png") center/cover no-repeat fixed;
  min-height:100dvh;
  padding:
    calc(env(safe-area-inset-top,0px) + 8px)
    calc(env(safe-area-inset-right,0px) + 8px)
    calc(env(safe-area-inset-bottom,0px) + 8px)
    calc(env(safe-area-inset-left,0px) + 8px);
  overflow:auto;
}

/* Fondo favela blur opcional */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url("fondo-favela.jpg") center/cover no-repeat;
  filter:blur(8px) brightness(0.8);
  z-index:-1;
}

.container{
  width:min(1200px,96vw);
  margin:0 auto;
  padding:20px 0 28px;
  display:flex;flex-direction:column;gap:18px;
  min-height:calc(100dvh - 16px - 16px);
  position:relative; z-index:1;
}

/* ===== ROOM CARD ===== */
.room-card{
  background:linear-gradient(180deg,rgba(7,28,56,.9),rgba(8,33,63,.88));
  border:1.5px solid rgba(128,180,255,.25);
  border-radius:16px; box-shadow:0 10px 28px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04);
  padding:16px 18px;
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center; gap:16px;
  backdrop-filter:saturate(1.2) blur(6px);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.05), 0 10px 26px rgba(0,0,0,.35);
}
.brand{display:flex;align-items:center;gap:10px}
.brand .ball{width:44px;height:44px;border-radius:50%;background:
  radial-gradient(circle,#fff 0 48%,transparent 50%),
  conic-gradient(#111 0 60deg,#fff 0 120deg,#111 0 180deg,#fff 0 240deg,#111 0 300deg,#fff 0 360deg);
  box-shadow:0 0 14px rgba(255,255,255,.35)}
.brand h1{margin:0;letter-spacing:.5px;line-height:1;font-size:clamp(20px,4.8vw,28px);font-weight:800;text-transform:uppercase;text-shadow:0 3px 0 rgba(0,0,0,.5)}
.brand h1 span{color:#7cf062}

.code-box{
  background:linear-gradient(180deg,#0c2747,#0a213b);
  border:1px solid rgba(128,180,255,.28); border-radius:12px;
  padding:10px 12px;
  display:flex;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap;
}
.room-code{font-size:clamp(22px,7vw,36px);font-weight:800;letter-spacing:2px}
.btn{
  background:linear-gradient(180deg,#1e68d6,#184fa5);
  border:1px solid rgba(110,178,255,.65);
  color:#eaf2ff;font-weight:700;
  padding:10px 14px;border-radius:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.08);
  cursor:pointer;
  font-size:clamp(12px,3.6vw,14px);
  touch-action:manipulation;
  transition:transform .15s ease, box-shadow .15s ease, filter .15s ease
}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn:focus-visible{ outline:2px solid var(--glow); outline-offset:2px; }

.user-area{display:flex;flex-direction:column;gap:10px;align-items:flex-end}
.userbox{
  display:flex;align-items:center;gap:8px;
  background:linear-gradient(180deg,#0c2747,#0a213b);
  border:1px solid rgba(128,180,255,.28);border-radius:12px;
  padding:8px 10px;font-weight:700;color:#cfe4ff
}
.mini-btn{padding:6px 10px;border-radius:10px;cursor:pointer;background:linear-gradient(180deg,#1e68d6,#184fa5);border:1px solid rgba(110,178,255,.65);color:#eaf2ff;font-weight:700}
.me-badge{color:#ffd166;font-weight:900;margin-left:4px}
.me-outline{outline:2px solid #f6c11b;outline-offset:2px;border-radius:16px; box-shadow:0 0 0 2px #f6c11b, 0 0 22px rgba(246,193,27,.25) !important;}

/* ===== PLAYERS ===== */
.players{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(110px, 1fr));
  gap:12px;
  padding:0 4px;
}
.player{
  position:relative;
  background:
    linear-gradient(180deg,rgba(14,39,70,.92),rgba(10,30,53,.88)),
    radial-gradient(120% 60% at 50% -10%, rgba(124,240,98,.15), transparent 60%);
  border-radius:18px;
  border:1px solid rgba(128,180,255,.28);
  padding:10px 8px;display:flex;flex-direction:column;align-items:center;gap:8px;min-height:108px
}
.player::before{
  content:"";
  position:absolute; inset:1px;
  background:linear-gradient(120deg,transparent 30%, rgba(255,255,255,.08) 50%, transparent 70%);
  border-radius:16px; pointer-events:none;
}
.avatar{width:56px;height:56px;border-radius:50%;display:grid;place-items:center;overflow:hidden}
.avatar.placeholder{background:radial-gradient(28px 28px at 50% 40%,#2f4b73 0 60%,#203a5e 61% 100%),radial-gradient(48px 48px at 50% 110%,#162b4a 0 58%,transparent 59%)}
.avatar-img{width:100%;height:100%;object-fit:cover;display:block}
.player small{color:var(--muted);font-weight:600;font-size:clamp(11px,3.2vw,12px)}
.badge-captain{
  position:absolute; top:8px; right:8px;
  width:22px; height:22px; border-radius:6px;
  display:grid; place-items:center;
  background:linear-gradient(180deg,#f6c11b,#f39c12);
  color:#10223b; box-shadow:0 4px 10px rgba(0,0,0,.35);
}
.kick-btn{ margin-left:6px; border:none; background:transparent; cursor:pointer; color:#ff6b6b; display:inline-flex; align-items:center; }

/* ===== SETTINGS ===== */
.settings{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));
  gap:12px;
}
.card{background:linear-gradient(180deg,var(--panel),var(--panel-2));border:1px solid rgba(128,180,255,.25);border-radius:16px;padding:14px}
.card h3{margin:0 0 8px;font-size:clamp(14px,3.8vw,16px);letter-spacing:.3px;color:#cce0ff;text-transform:uppercase;font-weight:800}
.selector{display:flex;align-items:center;justify-content:space-between;gap:8px;background:linear-gradient(180deg,#0b2441,#0a213b);border:1px solid rgba(128,180,255,.28);border-radius:12px;padding:10px}
.selector .value{font-size:clamp(20px,6.5vw,28px);font-weight:800}
.selector .arrow{width:40px;height:40px;border-radius:10px;background:linear-gradient(180deg,#1e68d6,#184fa5);border:1px solid rgba(110,178,255,.7);display:grid;place-items:center;cursor:pointer;font-size:20px;font-weight:900}

/* ===== CTA ===== */
.cta{display:flex;justify-content:center;flex-wrap:wrap;gap:12px; margin-top: clamp(24px, 5.5vh, 80px);}
.btn-cta{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.2), transparent 40%),
    repeating-conic-gradient(from 0deg, rgba(255,255,255,.08) 0 12deg, transparent 12deg 24deg),
    linear-gradient(180deg,var(--yellow),var(--yellow-2)) !important;
  border:1px solid rgba(255,210,80,.9);
  color:#10223b;font-weight:900;
  font-size:clamp(18px,6.5vw,28px);
  padding:14px 24px;border-radius:16px;
  filter:saturate(1); transition:filter .15s ease, transform .15s ease;
  box-shadow:0 10px 26px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.2);
}
.btn-cta:hover{ filter:saturate(1.05) brightness(1.03); }

/* En mobile, aún más espacio */
@media (max-width: 900px){
  .cta{ margin-top: clamp(28px, 7.5vh, 96px); }
}

/* ===== OVERLAYS ===== */
#reveal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,10,20,.9);z-index:1000;padding:16px}
.rev-card{width:min(680px,96vw);background:linear-gradient(180deg,#0d2747,#0b203a);border:1px solid rgba(128,180,255,.3);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.6);padding:20px;text-align:center}
.rev-content{padding:16px;background:linear-gradient(180deg,#102c4f,#0c2441);border:1px solid rgba(128,180,255,.25);border-radius:16px;min-height:100px;display:grid;place-items:center;font-size:clamp(18px,5.8vw,26px);font-weight:800}
.rev-avatar{width:80px;height:80px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,.35);margin:0 auto 10px;background:#0b203a;display:grid;place-items:center}
.rev-name{font-weight:800;margin-top:4px;opacity:.9}
.tip{background:#08213a;border:1px solid rgba(128,180,255,.25);padding:8px 12px;border-radius:12px;margin:10px;opacity:.9}

#drawOverlay{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,12,24,.9);z-index:1200;padding:16px}
.draw-card{width:min(760px,96vw);background:linear-gradient(180deg,#0d2747,#0b203a);border:1px solid rgba(128,180,255,.3);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.6);padding:16px}
.draw-title{margin:0 0 10px;text-align:center}
.bowl{position:relative;height:220px;border-radius:16px;background:radial-gradient(circle at 50% 0%, rgba(255,255,255,.09), transparent 60%), linear-gradient(180deg,#0a2340,#0a1f37);border:1px solid rgba(128,180,255,.25);overflow:hidden;display:flex;align-items:flex-end;justify-content:center;padding-bottom:16px}
.ball{position:absolute;bottom:-40px;width:26px;height:26px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff,#cfe1ff 55%,#82a8ff);opacity:.7;animation:float 3s ease-in-out infinite}
.ball:nth-child(2){left:20%;animation-delay:.2s}.ball:nth-child(3){left:40%;animation-delay:.4s}.ball:nth-child(4){left:60%;animation-delay:.6s}.ball:nth-child(5){left:80%;animation-delay:.8s}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-18px)}}
.slip{position:absolute;bottom:12px;left:50%;transform:translateX(-50%) translateY(120%);background:#fff;color:#0c2441;border-radius:8px;padding:8px 12px;font-weight:900;box-shadow:0 6px 18px rgba(0,0,0,.45);opacity:0;white-space:nowrap}
.slip.reveal{animation:popUp .6s ease-out forwards}
@keyframes popUp{0%{transform:translateX(-50%) translateY(120%) rotate(-6deg);opacity:0}
                 60%{transform:translateX(-50%) translateY(-26%) rotate(1deg);opacity:1}
                 100%{transform:translateX(-50%) translateY(-10%) rotate(0);opacity:1}}
.order-list{margin:12px 4px 0;display:grid;grid-template-columns:1fr 1fr;gap:8px}
.order-item{background:linear-gradient(180deg,#0c2747,#0a213b);border:1px solid rgba(128,180,255,.28);border-radius:10px;padding:8px 10px;display:flex;align-items:center;gap:8px}
.order-badge{width:26px;height:26px;border-radius:8px;background:linear-gradient(180deg,#1e68d6,#184fa5);border:1px solid rgba(110,178,255,.7);display:grid;place-items:center;font-weight:900}
.order-name{font-weight:800}

/* Cartel turno */
#turnBanner{
  position:absolute; top:38%; left:50%; transform:translate(-50%,-50%) scale(.92);
  display:none; padding:12px 18px; border-radius:16px;
  background:linear-gradient(135deg,#1e68d6,#4ade80);
  color:#fff; font-weight:900; font-size:clamp(16px,5.5vw,26px); letter-spacing:.3px;
  text-shadow:0 2px 10px rgba(0,0,0,.35);
  box-shadow:0 10px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.15);
  border:1px solid rgba(255,255,255,.2);
  pointer-events:none; z-index:5; opacity:0;
  transition:transform .35s ease, opacity .35s ease;
}
#turnBanner.show{display:block;opacity:1;transform:translate(-50%,-50%) scale(1);}
#turnBanner.hide{opacity:0;transform:translate(-50%,-50%) scale(.92);}
#turnBanner .who{font-size:clamp(18px,6vw,30px);text-transform:uppercase;}

/* Graffiti */
#graffitiBanner{
  position:absolute; top:48%; left:50%; transform:translate(-50%,-50%) scale(.95);
  display:none; z-index:10; padding:20px 32px; border-radius:20px;
  background:linear-gradient(135deg,#f6c11b,#ff4444); color:#0a0a0a;
  font-family:'Press Start 2P', 'Outfit', sans-serif; font-weight:900;
  font-size:clamp(18px,6vw,28px); text-transform:uppercase;
  text-shadow:-2px -2px 0 #fff, 2px -2px 0 #fff, -2px 2px 0 #fff, 2px 2px 0 #fff;
  letter-spacing:1px; box-shadow:0 10px 40px rgba(0,0,0,.55); animation:popGraffiti .6s ease-out;
}
@keyframes popGraffiti{
  0%{transform:translate(-50%,-50%) scale(0.8);opacity:0;}
  60%{transform:translate(-50%,-50%) scale(1.05);opacity:1;}
  100%{transform:translate(-50%,-50%) scale(1);}
}

/* ===== CHAT BURBUJAS (fase debate) ===== */
#chatList{ padding:14px; }
.chat-row{ display:flex; margin:8px 0; }
.chat-row.mine{ justify-content:flex-end; }
.chat-row.other{ justify-content:flex-start; }
.bubble{
  max-width:80%;
  padding:10px 14px; border-radius:16px;
  background:#142946; border:1px solid rgba(128,180,255,.18);
  color:#cfe4ff; box-shadow:0 4px 12px rgba(0,0,0,.25);
  animation:fadeUp .25s ease;
  font-size:clamp(13px,4vw,16px);
}
.chat-row.mine .bubble{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff; border-color:rgba(255,255,255,.2);
}
.bubble .name{ font-weight:800; opacity:.9; margin-bottom:2px; font-size:clamp(11px,3.2vw,13px); }
.bubble .text{ font-size:inherit }
@keyframes fadeUp{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)}}

/* ===== LOBBY LAYOUT ===== */
.lobby-layout{
  display:grid;
  grid-template-columns: 2fr 1fr;
  gap:16px;
}
.side-col .chat-card{
  height:100%;
  background:linear-gradient(180deg,#0d2747,#0b203a);
  border:1px solid rgba(128,180,255,.3);
  border-radius:16px;
  display:flex; flex-direction:column;
  min-height:420px;
}
.chat-head{ padding:12px 14px; border-bottom:1px solid rgba(128,180,255,.18); }
.chat-head h3{ margin:0; font-size:clamp(14px,3.6vw,16px); }
.chat-list{ flex:1; overflow:auto; padding:12px 12px 6px; }
.chat-form{ display:flex; gap:8px; padding:10px 12px; border-top:1px solid rgba(128,180,255,.18); }
.chat-form input{
  flex:1; padding:10px 12px; border-radius:12px;
  border:1px solid rgba(128,180,255,.35);
  background:#0a213b; color:#eaf2ff; font-size:14px;
}

/* Mensajes lobby */
.msg-row{ display:flex; margin:6px 0; }
.msg{ max-width:88%; padding:8px 12px; border-radius:12px;
      background:#142946; border:1px solid rgba(128,180,255,.18);
      color:#cfe4ff; box-shadow:0 4px 12px rgba(0,0,0,.25); }
.msg .name{ font-weight:800; font-size:12px; opacity:.9; margin-bottom:2px; }
.msg.mine{ background:linear-gradient(135deg,#22c55e,#16a34a); color:#fff; border-color:rgba(255,255,255,.2); margin-left:auto; }

/* Players y settings en responsive */
.players{ grid-template-columns: repeat(3, minmax(0, 1fr)); gap:12px; }
.settings-top{ display:grid; grid-template-columns: repeat(3, minmax(180px,1fr)); gap:12px; margin-top:8px; }
.settings-bottom{ display:grid; grid-template-columns: repeat(2, minmax(180px,1fr)); gap:12px; margin-top:8px; }

@media (max-width: 1100px){
  .lobby-layout{ grid-template-columns: 1.6fr 1fr; }
}
@media (max-width: 900px){
  .lobby-layout{ grid-template-columns: 1fr; }
  .side-col{ order: 3; }
  .settings-top{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .players{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 520px){
  .players{ grid-template-columns: 1fr; }
  .settings-top, .settings-bottom{ grid-template-columns: 1fr; }
}
.main-col{ display:flex; flex-direction:column; min-height: 68vh; }
.cta{ margin-top:auto; padding-top: clamp(16px, 2vh, 28px); }
.settings-bottom{ margin-bottom: 8px; }

/* ===== DEBATE ===== */
.debate-shell{ position:fixed; inset:0; background:linear-gradient(180deg, rgba(0,10,20,.88), rgba(0,10,20,.92)); padding:clamp(12px,2.5vw,24px); z-index:1200; }
.debate-card{
  max-width:min(1200px,96vw); margin:0 auto; border:1px solid rgba(128,180,255,.28); border-radius:18px; overflow:hidden;
  background:
    radial-gradient(140% 80% at 0% 0%, rgba(255,215,0,.06), transparent 50%),
    radial-gradient(140% 80% at 100% 100%, rgba(124,240,98,.08), transparent 55%),
    rgba(8,22,40,.86);
  backdrop-filter: blur(8px) saturate(1.05);
  box-shadow: 0 20px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.05);
}
.debate-head{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid rgba(128,180,255,.16); }
.debate-title{ margin:0; font-size:clamp(18px,6vw,22px); font-weight:900; letter-spacing:.3px; }
.debate-meta{ display:flex; flex-direction:column; align-items:flex-end; gap:2px; font-size:clamp(11px,3.4vw,13px); }
.debate-meta small{ opacity:.85 }
.debate-wrap{ display:grid; grid-template-columns: 7fr 3fr; gap:0; min-height:min(72vh, calc(100dvh - 160px)); }
.debate-chat{ display:flex; flex-direction:column; border-right:1px solid rgba(128,180,255,.12); background:linear-gradient(180deg,#071a33cc,#081b35cc); }
.debate-tips{ padding:10px 16px; }
.debate-list{ flex:1; overflow:auto; -webkit-overflow-scrolling:touch; padding:14px 16px 10px; }
.debate-form{ display:flex; gap:10px; padding:12px; border-top:1px solid rgba(128,180,255,.12); background:linear-gradient(180deg,#0b203acc,#091a31cc); }
.debate-input{ flex:1; padding:12px; border-radius:12px; border:1px solid rgba(128,180,255,.35); background:#0a213b; color:#eaf2ff; font-size:clamp(14px,4.2vw,16px); }
.debate-side{ display:flex; flex-direction:column; gap:10px; background:radial-gradient(120% 70% at 100% 0%, rgba(255,210,80,.06), transparent 55%), linear-gradient(180deg,#0e2442cc,#0a1e37cc); }
.side-section{ padding:12px 14px; border-bottom:1px solid rgba(128,180,255,.12); }
.side-title{ margin:0 0 8px; font-size:clamp(13px,3.6vw,15px); color:#cfe4ff; text-transform:uppercase; letter-spacing:.4px; font-weight:800; }
.side-row{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.side-players{ display:grid; grid-template-columns:1fr; gap:8px; max-height:28vh; overflow:auto; padding-right:2px; }
.side-player{ display:flex; align-items:center; gap:10px; background:linear-gradient(180deg,#0c2747,#0a213b); border:1px solid rgba(128,180,255,.22); border-radius:12px; padding:8px 10px; }
.side-player .ava{ width:34px; height:34px; border-radius:50%; overflow:hidden; background:#162a48; flex:0 0 34px; }
.side-player .name{ font-weight:800 } .side-player .state{ font-size:12px; opacity:.85 }
.dot{ width:8px; height:8px; border-radius:50%; display:inline-block; margin-right:6px; }
.dot.alive{ background:#22c55e } .dot.dead{ background:#ff6b6b }
.side-player.dead .name{ text-decoration: line-through; opacity: .75; }
.side-player .state-badge{ font-size: 11px; font-weight: 800; padding: 3px 8px; border-radius: 999px; border: 1px solid rgba(255,255,255,.12); }
.state-badge.alive{ color:#16a34a; background: rgba(34,197,94,.10); border-color: rgba(34,197,94,.25); }
.state-badge.dead{ color:#ff6b6b; background: rgba(255,107,107,.10); border-color: rgba(255,107,107,.25); }
#voteBar{ display:grid; grid-template-columns:1fr; gap:8px; }
.vote-item{ display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; width:100%; justify-content:flex-start; }
.vote-avatar{ width:28px; height:28px; border-radius:50%; overflow:hidden; background:#163257; display:grid; place-items:center; }
.vote-item.chosen{ outline:2px solid #7cf062; outline-offset:2px; }

/* Responsive debate */
@media (max-width: 960px){
  .debate-wrap{ grid-template-columns:1fr; }
  .debate-side{ order:-1; }
}

/* ===== TOAST ===== */
#toast{
  position:fixed; left:50%; bottom:18px; transform:translateX(-50%) translateY(20px);
  background:linear-gradient(180deg,#0d2747,#0b203a);
  border:1px solid rgba(128,180,255,.35); color:#eaf2ff;
  padding:10px 14px; border-radius:12px; z-index:2000; opacity:0; pointer-events:none;
  box-shadow:0 12px 28px rgba(0,0,0,.45);
  transition:opacity .22s ease, transform .22s ease; font-weight:800
}
#toast.show{opacity:1; transform:translateX(-50%) translateY(0)}

/* ===== LOADER ===== */
#loader-overlay{
  position:fixed; inset:0; z-index:9999;
  display:flex; align-items:center; justify-content:center; flex-direction:column; gap:18px;
  background: linear-gradient(180deg, rgba(3,12,30,.96), rgba(8,22,40,.96));
  transition: opacity 400ms ease, visibility 400ms ease;
  opacity:1; visibility:visible;
}
#loader-overlay.hidden{ opacity:0; visibility:hidden; pointer-events:none; }
.loader-card{
  display:flex; align-items:center; gap:14px;
  padding:18px 22px; border-radius:14px;
  background: rgba(255,255,255,0.04);
  box-shadow: 0 10px 30px rgba(2,6,20,0.6);
  backdrop-filter: blur(6px);
}
.spinner{
  width:56px; height:56px; border-radius:50%;
  border:6px solid rgba(255,255,255,0.12);
  border-top-color: var(--yellow);
  animation: spin 1s linear infinite;
}
@keyframes spin{ to{ transform: rotate(360deg); } }
#app-wrapper{ opacity:1; transition: opacity 350ms ease; }
#app-wrapper.hidden{ opacity:0; pointer-events:none; user-select:none; }
